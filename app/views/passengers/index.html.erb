<!-- Master Passengers Table -->
<div class="container my-4" style="max-width: 80%; height: 70vh;">
  <h1 class="mb-4">Master Passengers List</h1>

  <!-- Display notifications if exists -->
  <% if flash[:notice].present? %>
    <div class="alert alert-success">
      <%= flash[:notice] %>
    </div>
  <% end %>

  <div class="card" style="height: 100%;">
    <div class="card-body p-0" style="overflow-y: auto;">
      <table class="table table-striped table-bordered table-hover mb-0 small">
        <thead class="table-dark" style="position: sticky; top: 0; z-index: 1;">
          <tr class="border-0">
            <th class="border-0">Full Name</th>
            <th class="border-0">Address</th>
            <th class="border-0">City</th>
            <th class="border-0">State</th>
            <th class="border-0">Zip</th>
            <th class="border-0">Phone</th>
            <th class="border-0">Alternative Phone</th>
            <th class="border-0">Birthday</th>
            <th class="border-0">Race</th>
            <th class="border-0">Hispanic</th>
            <th class="border-0">Email</th>
            <th class="border-0">Notes</th>
            <th class="border-0">Date Registered</th>
            <th class="border-0">Audit</th>
            <th class="border-0" colspan="2">Actions</th>
          </tr>
        </thead>

        <tbody>
          <% @passengers.each do |passenger| %>
            <tr class="clickable-row" data-href="<%= edit_passenger_path(passenger) %>" style="cursor: pointer;">
              <td><%= passenger.full_name %></td>
              <td><%= passenger.address %></td>
              <td><%= passenger.city %></td>
              <td><%= passenger.state %></td>
              <td><%= passenger.zip %></td>
              <td><%= passenger.phone %></td>
              <td><%= passenger.alternative_phone %></td>
              <td><%= passenger.birthday %></td>
              <td><%= passenger.race %></td>
              <td><%= passenger.hispanic %></td>
              <td><%= passenger.email %></td>
              <td><%= passenger.notes %></td>
              <td><%= passenger.date_registered %></td>
              <td><%= passenger.audit %></td>
              
              <!-- Actions should remain separate -->
              <td><%= link_to 'Info', edit_passenger_path(passenger), class: "btn btn-sm btn-primary" %></td>
              <td>
                <%= link_to 'Delete', passenger,
                    data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' },
                    class: "btn btn-sm btn-danger" %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

  <div class="mt-2">
    Showing <%= @passengers.count %> results
  </div>

  <%= link_to 'New Passenger', new_passenger_path, class: "btn btn-success mt-3" %>
  <%= link_to 'Home Page', filter_rides_path, class: 'btn btn-secondary back-btn' %>
</div>